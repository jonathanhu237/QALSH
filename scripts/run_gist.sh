#!bin/bash

set -ex

# ------------------------------------------------------------------------------
#  Parameters
# ------------------------------------------------------------------------------
n=1000000
qn=100
d=960
B=16384
c=2.0
p=1.0
z=0.0
dtype=float32
dname=gist
pf=./data/${dname}/${dname}
df=./data/${dname}/
of=./results/${dname}/c=${c}_p=${p}/

# ------------------------------------------------------------------------------
#  Remove old results and old data
# ------------------------------------------------------------------------------
rm -rf ./results/${dname}
rm -rf ./data/${dname}/data

# ------------------------------------------------------------------------------
#  Ground Truth
# ------------------------------------------------------------------------------
./methods/qalsh -alg 0 -n ${n} -qn ${qn} -d ${d} -p ${p} -dt ${dtype} -pf ${pf}

# ------------------------------------------------------------------------------
#  QALSH Indexing
# ------------------------------------------------------------------------------
./methods/qalsh -alg 3 -n ${n} -d ${d} -B ${B} -p ${p} -z ${z} -c ${c} -dt ${dtype} -pf ${pf} -df ${df} -of ${of}

# ------------------------------------------------------------------------------
#  QALSH Query
# ------------------------------------------------------------------------------
./methods/qalsh -alg 4 -qn ${qn} -d ${d} -p ${p} -dt ${dtype} -pf ${pf} -df ${df} -of ${of}
